https://linux.die.net/include/elf.h
https://linux.die.net/man/5/elf


ELF文件分三类：目标文件、可执行文件、动态库

四大部分

1. 文件头 在32位系统下是56的字节，在64位系统下是64个字节。


对于可执行文件来说，文件头包含的一下信息与进程启动相关
e_entry      程序入口地址
e_phoff      segment偏移
e_phnum   segment数量

2. segments 加载器

typedef struct
{
  Elf64_Word    p_type;            /* Segment type */
  Elf64_Word    p_flags;        /* Segment flags */  /*segment权限，6表示可读写，5表示可读可执行
  Elf64_Off    p_offset;        /* Segment file offset */     /*段在文件中的偏移*/
  Elf64_Addr    p_vaddr;        /* Segment virtual address */   /*虚拟内存地址，这个表示内存中的
  Elf64_Addr    p_paddr;        /* Segment physical address  /*物理内存地址，对应用程序来说，这个字段无用*/
  Elf64_Xword    p_filesz;        /* Segment size in file */        /*段在文件中的长度*/
  Elf64_Xword    p_memsz;        /* Segment size in memory */       /在内存中的长度，一般和p_filesz的值一样*/
  Elf64_Xword    p_align;        /* Segment alignment */                  /* 段对齐*/
} Elf64_Phdr;   


3. section表，对可执行文件来说，没有用，在链接的时候有用，是对代码段数据段在链接是的一种描述。
     整个elf文件的组成可以使用下图来描述   


Refer：

http://blog.csdn.net/hhhbbb/article/details/6855004

http://www.cnblogs.com/xmphoenix/archive/2011/10/23/2221879.html