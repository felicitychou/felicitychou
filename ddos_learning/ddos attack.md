# ddos attack 



早期的拒绝服务攻击主要基于系统和应用程序的漏洞，只需要几个请求或数据包就能导致长时间的服务不可用，但只要系统和应用程序修补的漏洞，就不受影响。同时，这种攻击也非常容易被入侵检测系统发现。

分布式拒绝服务攻击：利用分布式的客户端，向服务提供者发起大量看似合法的请求，消耗或长期占用大量资源，从而达到拒绝服务的目的。分为三类 攻击网络带宽资源、攻击系统资源和攻击应用资源。无法通过系统升级或打补丁的方式阻止，也不能用入侵检测系统进行防御。



攻击网络带宽资源

- 直接攻击：使用大量受控主机直接向被攻击目标发送大量的网络数据包，以占满被攻击目标的带宽，并消耗服务器和网络设备的网络数据处理能力，达到拒绝服务的目的。

  - ICMP／IGMP洪水攻击

    向目标发送大量ICMP/IGMP报文。工具：hping   现状：已不多见，被攻击目标可在网络边界直接过滤并丢弃ICMP／IGMP数据包，防御该攻击。

  - UDP洪水攻击

    小包：64字节大小的数据包。传输数据帧最小值。相同流量，单包体积越小，数据包数量越多。由于网络设备需要对每一个数据包进行检查和校验。数据包数量越多，网络设备处理数据包的压力越大，造成处理速度的缓慢和传输延迟等拒绝服务攻击的效果。

    大包：1500字节以上的数据包，超过以太网的最大传输单元（MTU），该攻击能有效占用网络接口的传输带宽，迫使被攻击目标接收到数据包时进行分片重组，造成网络拥堵、服务器响应速度变慢。工具：hping、LOIC 现状：但洪水攻击完全依靠受控主机本身的网络性能，因此对攻击目标带宽资源的消耗并不大。

  - 隐藏技术：伪造源IP地址

- 反射和放大攻击 

  - DRDoS 分布式反射拒绝服务

    目的IP地址指向作为反射器的服务器、路由器等设备，而源IP地址则被伪造成被攻击目标的IP地址。
    反射器在收到数据包时，会认为该数据包是被攻击目标发来的请求，因此会将响应数据发送给被攻击目标。当大量响应数据包涌向攻击目标是，就会耗尽目标的网络带宽资源，造成拒绝服务攻击。

    大量反射器。

    通常使用无需认证或握手的协议。因此，绝大多数的反射攻击都是使用基于UDP协议的网络服务进行的。

  - 放大攻击（利用反射原理的放大攻击）
    反射器对于网络流量具有放大作用，因此反射器也称为放大器。
    反射器提供的网络服务协议中，需要存在请求和响应数据量不对称的情况。响应数据量需要大于请求数据量，响应数据量与请求数据量的比值越大，放大器的放大倍数也就越大，进行放大攻击所产生的消耗带宽资源的效果也就越明显。

    放大器所使用网络服务部署的广泛性决定了该放大攻击的规模和严重程度。

  - ACK反射攻击
     通过受控主机向大量不同的服务器发送伪造源IP的SYN请求，然后服务器响应的大量ACK应答数据涌向被攻击目标，占用目标的网络带宽资源并造成拒绝服务。
     需要先进行扫描，获得大量的反射器地址。
     优点，能够比较有效地隐藏攻击的来源。

  - DNS放大攻击
    TCP/UDP端口53，主要使用UDP，响应数据包比查询数据包大，利用普通的DNS查询请求就能够发动放大攻击，并将攻击流量放大2~10倍。但更有效的方法是使用RFC 2671 中定义的DNS扩展机制 EDNS0。EDNS0扩展了DNS数据包的结构，增加了OPT RR字段。该字段包含了客户端能够处理的组大UDP报文大小的信息。服务端在响应DNS请求是，解析并记录下客户段能够处理的最大UDP报文的大小，并根据大小生成响应报文。

    攻击这能够利用dig Domain Information 和 EDNS0 进行高效的DNS放大攻击。攻击者向广泛存在的开放DNS解析器发送dig查询命令，将OPT RR字段中的UDP报文大小设置为很大的值，并将请求的源IP地址伪造成被攻击目标的IP地址。DNS解析器收到查询请求后，会将解析的结果发送给被攻击目标。大量解析结果涌向目标时，造成拒绝服务攻击。查询请求数据包大小一般为60字节，查询返回结果的数据包大小通常为3000字节以上。
    需要先进行扫描，获得大量的开放DNS解析其的地址。

  - NTP放大攻击  
    UDP 123端口 
    Mode 7 调试接口，而接口中的monlist请求能够获取到与目标NTP服务器进行同步的最后600个客户段的IP地址等信息。
    monlist请求返回的数据量与一段时间内和NTP服务器交互的客户端数量有关。攻击者可以将伪造源ip地址的UDP请求包发送NTP放大器，伪造客户端与NTP服务器的交互，增加monlist请求的响应数据量并增大NTP放大器的放大倍数。攻击者发送的monlist请求数据包大小不超过64字节，而请求返回的结果会包含100个482字节的UDP响应数据
























